<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Unidad 1 · Actividades (Con progreso)</title>
  <link rel="stylesheet" href="css/main.css" />
  <style>
    /* Extensiones específicas para la vista de progreso */
    .progress-wrap { position: fixed; right: 20px; bottom: 120px; z-index: 9999; }
    .progress-card {
      width: 110px; height: 110px; border-radius: 999px; display: grid; place-items: center;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      box-shadow: 0 10px 30px rgba(0,0,0,0.45);
      backdrop-filter: blur(6px);
      border: 1px solid rgba(255,255,255,0.05);
    }
    .progress-svg { transform: rotate(-90deg); }
    .progress-percent { position: absolute; font-weight: 700; font-size: 1.05rem; color: var(--ink, #fff); }

    /* Estado de cada actividad (lista) */
    .menu ul li a { cursor: pointer; }
    .menu ul li.done a {
      filter: saturate(1.05) brightness(1.06);
      box-shadow: 0 8px 26px rgba(72, 40, 120, 0.35) !important;
      transform: translateY(-4px) scale(1.02);
      position: relative;
    }
    .menu ul li.done a::after {
      content: '✔';
      position: absolute;
      right: 12px; top: 50%; transform: translateY(-50%);
      background: rgba(0,0,0,0.2); padding: 4px 7px; border-radius: 10px; font-size: 0.9rem;
    }

    /* Small screens: move progress to top-right */
    @media (max-width:720px){
      .progress-wrap{ right: 12px; bottom: 90px; transform: scale(0.95); }
    }
  </style>
</head>
<body>
  <header class="site-header small">
    <div class="wrap header-row">
      <div>
        <a class="brand-link" href="unidad1.html">← Unidad 1</a>
        <h1 class="brand">Actividad 00 · Introducción</h1>
        <p class="subtitle">04/09/2025</p>
      </div>
      <nav class="mini-nav">
        <a href="index.html" class="nav-link">Inicio</a>
        <a href="unidad1.html" class="nav-link">Volver a Unidad 1</a>
      </nav>
    </div>
  </header>

  <main class="wrap actividad-detalle">
    <section>
      <h2>Descripción</h2>
      <p>Aquí va la descripción de la actividad. Puedes pegar texto, imágenes, enlaces a repositorios o incrustar código.</p>
    </section>

    <section>
      <h2>Evidencias</h2>
      <ul>
        <li><a href="assets/tareas/actividad00.pdf" target="_blank">Informe (PDF)</a></li>
        <li><a href="assets/img/evidencia00.png" target="_blank">Imagen</a></li>
        <li><a href="#" class="btn ghost" aria-disabled="true">Subir más archivos (pendiente)</a></li>
      </ul>
    </section>

    <section>
      <h2>Área para código / incrustaciones</h2>
      <pre><code>// Aquí puedes pegar tu código Python / C++ / HTML
function ejemplo(){
  console.log('Hola Nayelin');
}
</code></pre>
    </section>

    <section style="margin-top:1.2rem;">
      <h2>Lista de actividades (marca como completada)</h2>
      <p class="muted">Haz clic en una actividad para marcarla como completada. El progreso se guarda en tu navegador.</p>
      <ul id="actividad-list" style="list-style:none;padding:0;margin-top:0.8rem;display:flex;flex-direction:column;gap:0.8rem;max-width:800px;">
        <li data-id="act-00"><a class="btn" href="unidad1_00.html">Actividad 00 · Introducción</a></li>
        <li data-id="act-01"><a class="btn" href="unidad1_01.html">Actividad 01 · Teoría básica</a></li>
        <li data-id="act-02"><a class="btn" href="unidad1_02.html">Actividad 02 · Ejercicios</a></li>
        <li data-id="act-03"><a class="btn" href="unidad1_03.html">Actividad 03 · Laboratorio</a></li>
        <li data-id="act-04"><a class="btn" href="unidad1_04.html">Actividad 04 · Práctica</a></li>
        <li data-id="act-05"><a class="btn" href="unidad1_05.html">Actividad 05 · Examen</a></li>
      </ul>

      <div style="margin-top:0.9rem; display:flex; gap:0.6rem; align-items:center;">
        <button id="marcar-todas" class="btn">Marcar todas</button>
        <button id="desmarcar-todas" class="btn" style="background:linear-gradient(135deg,#444159,#2b2540);">Borrar marcas</button>
        <small style="color:#cfcfe6;opacity:0.9;margin-left:8px;">Progreso guardado localmente</small>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="wrap">
      <p>© 2025 Nayelin · Portafolio Programación Numérica</p>
    </div>
  </footer>

  <!-- Burbuja de progreso (fija) -->
  <div class="progress-wrap" aria-hidden="false">
    <div class="progress-card" role="status" aria-live="polite" aria-label="Progreso de actividades">
      <svg class="progress-svg" width="90" height="90" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">
        <path class="progress-bg" d="M18 2.0845a15.9155 15.9155 0 1 0 0 31.831a15.9155 15.9155 0 1 0 0-31.831" fill="none" stroke="rgba(255,255,255,0.06)" stroke-width="2.8"/>
        <path class="progress-bar" d="M18 2.0845a15.9155 15.9155 0 1 0 0 31.831a15.9155 15.9155 0 1 0 0-31.831" fill="none" stroke="url(#g)" stroke-width="2.8" stroke-linecap="round" stroke-dasharray="0 100" />
        <defs>
          <linearGradient id="g" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="#8c5ef2" />
            <stop offset="100%" stop-color="#a178ff" />
          </linearGradient>
        </defs>
      </svg>
      <span class="progress-percent" id="pct">0%</span>
    </div>
  </div>

  <script>
    // Calcula y renderiza el progreso en la burbuja. Guarda estado en localStorage por unidad.
    (function(){
      const list = document.getElementById('actividad-list');
      const pctEl = document.getElementById('pct');
      const progressBar = document.querySelector('.progress-bar');
      const STORAGE_KEY = 'unidad1_done_v1';
      const getSaved = () => { try { return JSON.parse(localStorage.getItem(STORAGE_KEY)) || {}; } catch(e){return {}} };
      const save = (obj) => localStorage.setItem(STORAGE_KEY, JSON.stringify(obj));

      // Inicializa estado desde storage
      const saved = getSaved();
      const items = Array.from(list.querySelectorAll('li'));
      function renderSaved(){
        items.forEach(li => {
          const id = li.dataset.id;
          if(saved[id]) li.classList.add('done'); else li.classList.remove('done');
        });
        updateProgress();
      }

      function updateProgress(){
        const total = items.length;
        const done = items.filter(i => i.classList.contains('done')).length;
        const pct = Math.round((done/total)*100);
        pctEl.textContent = pct + '%';

        // SVG stroke dash calculation (36 circumference approx): dasharray uses 100 scale
        const dash = pct + ' 100';
        progressBar.setAttribute('stroke-dasharray', dash);

        // ARIA
        document.querySelector('.progress-card').setAttribute('aria-label', `Progreso de actividades: ${pct} por ciento`);
      }

      // Toggle al hacer clic en la actividad (no se sigue el href para marcar)
      items.forEach(li => {
        const a = li.querySelector('a');
        a.addEventListener('click', (e) => {
          // si mantienes Shift + clic -> seguir link normal
          if(e.shiftKey) return;
          e.preventDefault();
          const id = li.dataset.id;
          const doneNow = li.classList.toggle('done');
          saved[id] = doneNow ? true : false;
          save(saved);
          updateProgress();
        });
      });

      // Botones globales
      document.getElementById('marcar-todas').addEventListener('click', ()=>{
        items.forEach(li=>{ li.classList.add('done'); saved[li.dataset.id]=true; }); save(saved); updateProgress();
      });
      document.getElementById('desmarcar-todas').addEventListener('click', ()=>{
        items.forEach(li=>{ li.classList.remove('done'); saved[li.dataset.id]=false; }); save(saved); updateProgress();
      });

      // Render inicial
      renderSaved();

    })();
  </script>
</body>
</html>

